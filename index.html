<!DOCTYPE html>
<html>
	<head>
		<meta charset=utf-8>
		<title>Solar system</title>
		<style>
			body { margin: 0; }
			canvas { width: 100%; height: 100% }
		</style>
	</head>
	<body>
		<script src="three.js"></script>
		<script>
			var scene = new THREE.Scene();
			var camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);

			var renderer = new THREE.WebGLRenderer();
			renderer.setSize(window.innerWidth, window.innerHeight);

			document.body.appendChild(renderer.domElement);


			// Sun
			var sphereGeometry = new THREE.SphereGeometry(10, 18, 8);
			var material = new THREE.MeshBasicMaterial({color: 0xf7e011});
			var sun = new THREE.Mesh(sphereGeometry, material);
			scene.add(sun);

			// Earth
			sphereGeometry = new THREE.SphereGeometry(1, 18, 8);
			var earthMaterial = new THREE.MeshBasicMaterial({color: 0x00ff00});
			var earth = new THREE.Mesh(sphereGeometry, earthMaterial);
			var earthOrbitRadius = 40;
			var earthOrbitAngle = 0;
			var initialCoords = convertPolarToCart(earthOrbitRadius, earthOrbitAngle);
			earth.position.x = initialCoords.x;
			earth.position.y = initialCoords.y;
			scene.add(earth);

			// Moon
			sphereGeometry = new THREE.SphereGeometry(0.5, 18, 8);
			var moonMaterial = new THREE.MeshBasicMaterial({color: 0xd8d8d8});
			var moon = new THREE.Mesh(sphereGeometry, moonMaterial);
			var moonOrbitRadius = 6;
			var moonOrbitAngle = 0;
			initialCoords = convertPolarToCart(moonOrbitRadius, moonOrbitAngle);
			moon.position.x = initialCoords.x;
			moon.position.y = initialCoords.y;
			scene.add(moon);

			camera.position.z = 125;

			function convertPolarToCart(rad, phi) {
				return {
					x: rad * Math.cos(phi),
					y: rad * Math.sin(phi)
				}
			}

			function render() {
				requestAnimationFrame(render);

				// Sun rotation
				sun.rotation.x += 0.01;
				sun.rotation.y += 0.02;

				// Earth orbiting
				earthOrbitAngle += 0.01;
				var updatedEarthCoords = convertPolarToCart(earthOrbitRadius, earthOrbitAngle);
				earth.position.x = updatedEarthCoords.x;
				earth.position.y = updatedEarthCoords.y;

				// Moon orbiting Earth
				moonOrbitAngle += 0.1;
				var updatedMoonCoords = convertPolarToCart(moonOrbitRadius, moonOrbitAngle);
				moon.position.x = updatedMoonCoords.x + earth.position.x;
				moon.position.y = updatedMoonCoords.y + earth.position.y;

				renderer.render(scene, camera);
			}

			render();
		</script>
	</body>
</html>